#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Debian 12 + snapd + flatpak
# –ó–∞–ø—É—Å–∫–∞—Ç—å —Å –ø—Ä–∞–≤–∞–º–∏ root –∏–ª–∏ —á–µ—Ä–µ–∑ sudo

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Debian 12..."

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ APT
apt update && echo "‚úÖ –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ APT –æ–±–Ω–æ–≤–ª—ë–Ω"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ APT
apt upgrade -y && echo "‚úÖ –ü–∞–∫–µ—Ç—ã APT –æ–±–Ω–æ–≤–ª–µ–Ω—ã"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ snapd –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö snap-–ø–∞–∫–µ—Ç–æ–≤
if command -v snap &> /dev/null; then
    echo "üîÑ –û–±–Ω–æ–≤–ª—è–µ–º snapd –∏ snap-–ø–∞–∫–µ—Ç—ã..."
    snap refresh && echo "‚úÖ Snap-–ø–∞–∫–µ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
else
    echo "‚ö†Ô∏è snapd –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ snap."
fi

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ flatpak –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö flatpak-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
if command -v flatpak &> /dev/null; then
    echo "üîÑ –û–±–Ω–æ–≤–ª—è–µ–º flatpak –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
    flatpak update -y && echo "‚úÖ Flatpak-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
else
    echo "‚ö†Ô∏è flatpak –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ flatpak."
fi

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
echo "üßπ –û—á–∏—â–∞–µ–º –∫—ç—à APT..."
apt autoremove -y
apt autoclean -y

echo "üéâ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"